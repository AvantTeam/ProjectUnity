buildscript{
    ext{
        props = new Properties().with{ p -> p.load(file('gradle.properties').newReader()); return p }

        mindustryVersion = props["mindustryVersion"]
        mindustryHash = props["mindustryHash"]
        arcHash = props["arcHash"]
        multilibVersion = props["multilibVersion"]
    }

    repositories{
        mavenCentral()
        maven{ url 'https://jitpack.io' }
    }

    dependencies{
        //classpath "com.github.Anuken.Arc:arc-core:$mindustryVersion"
        classpath "com.github.Anuken.Arc:arc-core:$arcHash"
        classpath "com.github.Anuken.Mindustry:core:$mindustryVersion"
        //classpath "com.github.Anuken:Mindustry:$mindustryHash"
        classpath "com.github.younggam:multi-lib:$multilibVersion"
    }
}

allprojects{
    apply plugin: 'java'
    group = "com.github.avant"

    ext{
        mindustryVersion = props["mindustryVersion"]
        mindustryHash = props["mindustryHash"]
        arcHash = props["arcHash"]
        multilibVersion = props["multilibVersion"]
        modName = props["modName"]

        sdkVersion = '30'
        sdkRoot = System.getenv("ANDROID_HOME")

        version '1.0'

        sourceCompatibility = 1.8
    }

    repositories{
        mavenLocal()
        mavenCentral()
        maven{ url "https://oss.sonatype.org/content/repositories/snapshots/" }
        maven{ url "https://oss.sonatype.org/content/repositories/releases/" }
        maven{ url 'https://jitpack.io' }
        jcenter()
    }

    //java 8 backwards compatibility flag
    tasks.withType(JavaCompile){
        if(JavaVersion.current() != JavaVersion.VERSION_1_8){
            options.compilerArgs.addAll(['--release', '8'])
        }
    }
}

project(":main"){
    dependencies{
        //compileOnly "com.github.Anuken.Arc:arc-core:$mindustryVersion"
        compileOnly "com.github.Anuken.Arc:arc-core:$arcHash"
        compileOnly "com.github.Anuken.Mindustry:core:$mindustryVersion"
        //compileOnly "com.github.Anuken:Mindustry:$mindustryHash"

        implementation "com.github.younggam:multi-lib:$multilibVersion"
    }
}

project(":tools"){
    dependencies{
        implementation project(":main")

        //implementation "com.github.Anuken.Arc:arc-core:$mindustryVersion"
        implementation "com.github.Anuken.Arc:arc-core:$arcHash"
        //implementation "com.github.Anuken.Arc:packer:$mindustryVersion"
        implementation "com.github.Anuken.Arc:packer:$arcHash"
        implementation "com.github.Anuken.Mindustry:core:$mindustryVersion"
        //implementation "com.github.Anuken:Mindustry:$mindustryHash"
    }
}
