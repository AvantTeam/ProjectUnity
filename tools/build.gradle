sourceSets.main.java.srcDirs = ["src/"]

ext{
    imageProcessorMain = "unity.tools.SpriteProcessor"

    spritesGenFolder = "../main/assets-raw/sprites-gen/"
    spritesGenUIFolder = "../main/assets-raw/sprites-gen/ui/"
    spritesAssetsFolder = "../main/assets/sprites/"
}

task proc(dependsOn: [classes, configurations.runtimeClasspath]){
    doLast{
        delete{
            delete spritesGenFolder
            delete spritesAssetsFolder
        }

        file(spritesGenFolder).mkdirs()
        file(spritesGenUIFolder).mkdirs()
        file(spritesAssetsFolder).mkdirs()

        javaexec{
            main = imageProcessorMain
            classpath = sourceSets.main.runtimeClasspath
            jvmArgs "-Djava.awt.headless=true"
            systemProperty "alphableed", getProperty("alphableed")

            standardInput = System.in
            workingDir = "../main/assets-raw/"
        }

        copy{
            from spritesGenFolder
            into spritesAssetsFolder
        }
    }
}

repositories{
    mavenCentral()
    maven{url "https://www.jitpack.io"}
}

dependencies{
    implementation project(":main")

    implementation "com.github.Anuken.Arc:arc-core:$mindustryVersion"
    implementation "com.github.Anuken.Arc:packer:$mindustryVersion"
    implementation "com.github.Anuken.Mindustry:core:$mindustryVersion"
}
